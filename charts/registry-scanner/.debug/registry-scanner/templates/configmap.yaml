apiVersion: v1
kind: ConfigMap
metadata:
  name: RELEASE-NAME-registry-scanner
  labels:
    helm.sh/chart: registry-scanner-1.6.7
    app.kubernetes.io/instance: RELEASE-NAME
    app.kubernetes.io/name: registry-scanner
    app.kubernetes.io/component: registry-scanner-orchestrator
    app.kubernetes.io/version: "0.7.3"
    app.kubernetes.io/managed-by: Helm
data:
  config.yaml: |
    logging: info

    # Registry configuration
    registry:
      url:
      user: from-secret
      pass: from-secret
      type:
      skipTLS: false
      maxRetries: 10
      maxRetryWait: 10m
      minRetryWait: 5s
      memberAccountsRoleName: OrganizationAccountAccessRole
    secure:
      baseUrl: https://secure.sysdig.com
      apiToken: from-secret
      onPrem: false
      skipTLS: false

    scan:
      runner: k8sjob
      k8sInCluster: true
      namespace: NAMESPACE
      workers: 5
      disablePlatformScanning: false
      jobs:
        ttlSecondsAfterFinished: 600
        serviceAccountName: RELEASE-NAME-registry-scanner
        resources:
          requests:
            memory: 500Mi
            cpu: 500m
          limits:
            memory: 2Gi
        temporaryVolumeSizeLimit: 2Gi
      inlineScanImage: foo:bar

    filter:
      maxAgeDays: 90
      maxTagsPerRepository: 5
      maxRepositoriesPerRegistry: 500

    vulnerabilityDBVersion: "v2"
