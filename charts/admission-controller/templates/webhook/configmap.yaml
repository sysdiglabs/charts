apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "admissionController.webhook.fullname" . }}
  labels:
    {{ include "admissionController.webhook.labels" . | nindent 4 }}
data:
  SECURE_URL: "https://{{ include "admissionController.apiEndpoint" . }}"
  {{- if .Values.admissionController.scanner.enabled }}
  SCANNER_URL: http://{{ include "admissionController.scanner.fullname" . }}:{{ .Values.admissionController.scanner.service.port }}
  {{- else }}
  SCANNER_URL: ""
  {{- end }}
  CLUSTER_NAME: {{ include "clusterName" . }}
  LOG_LEVEL: "{{ .Values.admissionController.webhook.logLevel }}"
  VERIFY_SSL: "{{ .Values.admissionController.verifySSL }}"
  K8S_AUDIT_DETECTIONS: "{{ .Values.admissionController.features.k8sAuditDetections }}"
  DENY_ON_ERROR: "{{ .Values.admissionController.webhook.denyOnError }}"
  DRY_RUN: "{{ .Values.admissionController.webhook.dryRun }}"
  HTTP_TIMEOUT: "{{ .Values.admissionController.webhook.timeoutSeconds }}s"
