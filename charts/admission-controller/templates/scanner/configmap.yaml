{{- if .Values.admissionController.scanner.enabled -}}
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "admissionController.scanner.fullname" . }}
  labels:
    {{ include "admissionController.scanner.labels" . | nindent 4 }}
data:
  SECURE_BASE_URL: "https://{{ include "admissionController.apiEndpoint" . }}"
  SECURE_SKIP_TLS: "{{ not .Values.admissionController.verifySSL }}"
  REGISTRY_SKIP_TLS: "{{ not .Values.admissionController.scanner.verifyRegistryTLS }}"
  {{- if .Values.admissionController.scanner.dockerCfgSecretName }}
  REGISTRY_DOCKERCFG_PATH: /dockerauth/.dockercfg
  {{- end }}
{{- end -}}
