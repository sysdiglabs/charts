# Default values for admission-controller.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

sysdig:
  url: "https://app.sysdigcloud.com"
  secureAPIToken: ""

clusterName: ""

features:
  publishOnSecureEventFeed: false

verifySSL: true

nameOverride: ""
fullnameOverride: ""

serviceAccounts:
  webhook:
    create: true
    annotations: {}
    name: ""
  scanner:
    create: true
    annotations: {}
    name: ""

webhook:
  name: webhook
  replicaCount: 1

  image:
    repository: sysdiglabs/admission-controller
    pullPolicy: Always
    # Override the default image tag. If not specified, it defaults to appVersion in Chart.yaml
    tag: master

  service:
    type: ClusterIP
    port: 443

  # Set to http://proxyIp:proxyPort in case connection to Sysdig Secure requires a proxy
  httpProxy: ""
  # List of hosts, IPs, or IPs in CIDR format that should not go through the proxy. We include "kubernetes" service and typical 10.0.0.0/8 services
  noProxy: kubernetes,10.0.0.0/8

  podAnnotations:
    prometheus.io/scrape: "true"
    prometheus.io/path: "/metrics"
    prometheus.io/port: "5000"
    prometheus.io/scheme: "https"

  podSecurityContext: {}

  securityContext:
    capabilities:
      drop:
      - ALL
    readOnlyRootFilesystem: true
    runAsNonRoot: true

  imagePullSecrets: []
  resources: {}
    # limits:
    #   cpu: 100m
    #   memory: 128Mi
    # requests:
    #   cpu: 100m
    #   memory: 128Mi

  nodeSelector: {}

  tolerations: []

  affinity: {}

# inline scanner configuration
scanner:
  enabled: true
  name: scanner
  replicaCount: 1

  image:
    repository: sysdiglabs/inline-scan-service
    pullPolicy: Always
    # Override the default image tag. If not specified, it defaults to appVersion in Chart.yaml
    tag: 0.0.6

  service:
    port: 8080

  authWithSecureToken: false

  # Put your <Sysdig-Secure-Secret-Token> in this value
  # Set to http://proxyIp:proxyPort in case connection to Sysdig Secure requires a proxy
  httpProxy: ""
  # List of hosts, IPs, or IPs in CIDR format that should not go through the proxy. We include "kubernetes" service and typical 10.0.0.0/8 services
  noProxy: kubernetes,10.0.0.0/8

  podAnnotations:
    prometheus.io/scrape: "true"
    prometheus.io/path: "/metrics"
    prometheus.io/port: "8080"

  podSecurityContext: {}

  securityContext:
    capabilities:
      drop:
        - ALL
    readOnlyRootFilesystem: true
    runAsNonRoot: true

  imagePullSecrets: []

  resources: {}
    # limits:
    #   cpu: 100m
    #   memory: 128Mi
    # requests:
    #   cpu: 100m
    #   memory: 128Mi

  nodeSelector: {}

  tolerations: []

  affinity: {}
